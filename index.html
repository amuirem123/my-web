<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Viral Times: Reporter's Desk</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* í°íŠ¸ ë° ê¸°ë³¸ ì„¤ì • */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=Nanum+Myeongjo:wght@700&display=swap');

        body {
            background-color: #1a1a1a;
            color: #fff;
            font-family: 'Noto Sans KR', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            height: 100vh;
            overflow: hidden;
            user-select: none; /* ë“œë˜ê·¸ ë°©ì§€ */
        }

        /* === -1. ëœë”© í™”ë©´ (íƒ€ì´í‹€) === */
        #landing-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #111; z-index: 400;
            display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;
        }
        .landing-title {
            font-family: 'Nanum Myeongjo', serif; font-size: 4.5rem; color: #d63031;
            margin-bottom: 20px; letter-spacing: 10px;
            text-shadow: 4px 4px 0px #fff;
            animation: titlePulse 3s infinite ease-in-out;
        }
        .landing-subtitle {
            font-size: 1.4rem; color: #888; margin-bottom: 80px; letter-spacing: 2px;
        }
        .main-start-btn {
            padding: 20px 60px; font-size: 1.8rem; background-color: #fff; color: #000; border: none;
            cursor: pointer; font-family: 'Noto Sans KR', sans-serif; font-weight: 900; transition: all 0.2s;
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
        }
        .main-start-btn:hover {
            background-color: #d63031; color: #fff; transform: scale(1.1);
            box-shadow: 0 0 40px rgba(214, 48, 49, 0.6);
        }

        /* === 0. ì¸íŠ¸ë¡œ í™”ë©´ (ì˜¤í”„ë‹) === */
        #intro-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000;
            z-index: 300;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }

        .intro-title {
            font-family: 'Nanum Myeongjo', serif;
            font-size: 3rem;
            color: #d63031;
            margin-bottom: 40px;
            letter-spacing: 5px;
            animation: fadeIn 2s ease-in;
        }

        .intro-text {
            font-size: 1.2rem;
            line-height: 2;
            max-width: 800px;
            color: #ccc;
            margin-bottom: 50px;
            white-space: pre-line;
            word-break: keep-all; 
        }

        .start-btn {
            padding: 15px 40px;
            font-size: 1.5rem;
            background-color: #d63031;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Noto Sans KR', sans-serif;
            font-weight: bold;
            transition: all 0.3s;
            opacity: 0;
            animation: fadeIn 1s ease-in 1.5s forwards; 
        }
        .start-btn:hover {
            background-color: #b71c1c;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(214, 48, 49, 0.5);
        }

        /* === 0.5 ìŠ¤í† ë¦¬ í™”ë©´ (ì—…ë¬´ ì§€ì‹œ) === */
        #story-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: #111;
            z-index: 200;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .story-narration {
            font-size: 1.3rem;
            color: #ccc;
            margin-bottom: 40px;
            text-align: center;
            line-height: 1.8;
            opacity: 0;
            animation: fadeIn 1s ease-in forwards;
            word-break: keep-all;
        }

        .dialogue-box {
            background-color: #2c3e50;
            border: 2px solid #fff;
            border-radius: 10px;
            padding: 30px;
            max-width: 800px;
            width: 100%;
            position: relative;
            opacity: 0;
            animation: slideUp 0.8s ease-out 1s forwards;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        .speaker-name {
            position: absolute;
            top: -15px;
            left: 20px;
            background-color: #f1c40f;
            color: #000;
            padding: 5px 15px;
            font-weight: 900;
            font-size: 1.1rem;
            border-radius: 5px;
            border: 2px solid #fff;
        }

        .dialogue-text {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #fff;
            word-break: keep-all;
        }

        .go-btn {
            margin-top: 50px;
            padding: 12px 30px;
            font-size: 1.2rem;
            background-color: #fff;
            color: #000;
            border: none;
            cursor: pointer;
            font-weight: bold;
            opacity: 0;
            animation: fadeIn 1s ease-in 2s forwards;
            transition: transform 0.2s;
        }
        .go-btn:hover { transform: scale(1.1); background-color: #ddd; }

        /* === Day Transition (ë‚ ì§œ/ì´ë²¤íŠ¸ ì»·ì‹ ) === */
        #day-transition-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000; z-index: 500;
            display: none; 
            flex-direction: column; justify-content: center; align-items: center;
        }
        #day-transition-text {
            font-family: 'Nanum Myeongjo', serif; 
            font-size: 5rem; 
            color: #fff;
            font-weight: 900;
            letter-spacing: 5px;
            opacity: 0;
        }
        #day-transition-event {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 2.2rem;
            color: #d63031;
            font-weight: bold;
            margin-top: 30px;
            opacity: 0;
            text-shadow: 2px 2px 0px #000;
        }
        .day-anim-active {
            animation: dayFadeInOut 3s ease-in-out forwards;
        }
        @keyframes dayFadeInOut {
            0% { opacity: 0; transform: scale(0.9); }
            25% { opacity: 1; transform: scale(1); }
            75% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(1.1); }
        }

        /* === ê¸´ê¸‰ ì œë³´ ì•Œë¦¼ (Toast) === */
        #turn-notification {
            position: absolute; top: 30%; left: 50%; transform: translateX(-50%);
            background: rgba(214, 48, 49, 0.95); color: white;
            padding: 25px 40px; border-radius: 10px; border: 3px solid #fff;
            font-size: 1.4rem; font-weight: bold;
            box-shadow: 0 15px 30px rgba(0,0,0,0.7);
            z-index: 600; display: none; text-align: center;
            width: 80%; max-width: 600px;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            word-break: keep-all;
        }
        @keyframes popIn { from { transform: translateX(-50%) scale(0.5); opacity: 0; } to { transform: translateX(-50%) scale(1); opacity: 1; } }

        /* === ìŠ¤ë§ˆíŠ¸í° ë©”ì‹ ì € UI === */
        #smartphone-container {
            position: fixed; bottom: 20px; right: 20px; z-index: 300;
            display: none; /* ê²Œì„ ì‹œì‘ í›„ í‘œì‹œ */
        }
        #smartphone-btn {
            width: 70px; height: 70px; background-color: #2ecc71;
            border-radius: 50%; box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            display: flex; justify-content: center; align-items: center;
            font-size: 2.5rem; cursor: pointer; position: relative;
            transition: transform 0.2s; border: 3px solid #fff;
        }
        #smartphone-btn:hover { transform: scale(1.1); }
        #msg-badge {
            position: absolute; top: -5px; right: -5px;
            background-color: #e74c3c; color: white;
            width: 25px; height: 25px; border-radius: 50%;
            font-size: 0.9rem; font-weight: bold;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s;
        }
        #smartphone-screen {
            position: absolute; bottom: 90px; right: 0;
            width: 320px; height: 450px;
            background-color: #fff; border: 4px solid #333;
            border-radius: 20px; overflow: hidden;
            display: none; flex-direction: column;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            animation: slideUpPhone 0.3s ease-out;
        }
        @keyframes slideUpPhone { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .phone-header {
            background-color: #34495e; color: white; padding: 15px;
            font-weight: bold; font-size: 1.1rem; display: flex; justify-content: space-between;
        }
        .phone-body {
            flex: 1; background-color: #ecf0f1; padding: 15px;
            overflow-y: auto; display: flex; flex-direction: column; gap: 10px;
        }
        .msg-bubble {
            background-color: white; color: #333; padding: 10px 15px;
            border-radius: 10px; font-size: 0.95rem; line-height: 1.4;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); max-width: 90%;
            align-self: flex-start; position: relative;
            word-break: keep-all;
        }
        .msg-bubble.system {
            background-color: #f1c40f; color: #000; font-size: 0.85rem;
            align-self: center; text-align: center; font-weight: bold;
        }
        .msg-sender {
            font-size: 0.8rem; color: #7f8c8d; margin-bottom: 4px; display: block; font-weight: bold;
        }
        .close-phone { cursor: pointer; }

        /* === 0.8 ì¸ê²Œì„ ëŒ€í™” ì˜¤ë²„ë ˆì´ (ì´ë²¤íŠ¸ìš©) === */
        #dialogue-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.9);
            z-index: 150; 
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .npc-dialogue-area {
            width: 100%; max-width: 800px;
            background-color: #34495e; border: 3px solid #ecf0f1; border-radius: 15px; padding: 30px;
            position: relative; margin-bottom: 50px; min-height: 150px;
            display: flex; align-items: center; cursor: pointer; transition: background-color 0.2s;
        }
        .npc-dialogue-area:hover { background-color: #2c3e50; }
        .npc-name {
            position: absolute; top: -20px; left: 30px; background-color: #e74c3c; color: white;
            padding: 5px 20px; font-weight: bold; font-size: 1.2rem; border-radius: 5px; border: 2px solid #fff;
        }
        .npc-text { 
            font-size: 1.3rem; line-height: 1.6; color: white; 
            word-break: keep-all; 
        }
        .next-arrow {
            position: absolute; bottom: 15px; right: 20px; font-size: 1.5rem; color: #ecf0f1;
            animation: bounce 1s infinite;
        }
        .player-choice-area {
            width: 100%; max-width: 800px; display: flex; flex-direction: column; gap: 15px;
        }
        .player-choice-btn {
            background-color: #000; border: 2px solid #2ecc71; color: #2ecc71; padding: 20px;
            font-size: 1.2rem; font-weight: bold; text-align: left; cursor: pointer; transition: all 0.2s; border-radius: 10px;
            word-break: keep-all;
        }
        .player-choice-btn:hover { background-color: #2ecc71; color: #000; transform: translateX(10px); }
        .player-choice-label {
            display: inline-block; background: #2ecc71; color: black; padding: 2px 8px; font-size: 0.9rem; margin-right: 10px; border-radius: 3px;
        }

        /* === ë©”ì¸ ê²Œì„ ìŠ¤íƒ€ì¼ === */
        .game-bg {
            background-image: repeating-linear-gradient(90deg, #2b2b2b 0px, #333 50px, #2b2b2b 100px);
            width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: -1;
        }
        #top-bar {
            width: 95%; max-width: 900px; background-color: #eee; color: #000;
            border: 3px solid #000; border-radius: 5px; margin-top: 20px; padding: 10px 20px;
            display: none; justify-content: space-between; align-items: center;
            font-size: 1.1rem; font-weight: bold; box-shadow: 5px 5px 0px #000; z-index: 10;
        }
        .stat-item { display: flex; align-items: center; gap: 5px; }

        #desk-area {
            position: relative; width: 100%; max-width: 800px; height: 100%;
            display: none; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;
        }
        #paper {
            background-color: #fcf4cf; color: #000; width: 90%; max-width: 650px; padding: 30px;
            border: 3px solid #000; box-shadow: 10px 10px 20px rgba(0,0,0,0.5);
            transform: rotate(-1deg); min-height: 350px; position: relative; margin-bottom: 20px;
            transition: all 0.3s ease; max-height: 70vh; overflow-y: auto;
        }
        #paper::before {
            content: ''; position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            width: 100px; height: 30px; background-color: #555; border-radius: 5px; border: 2px solid #000; z-index: 10;
        }
        #paper-title {
            font-weight: 900; font-size: 1.8rem; border-bottom: 3px solid #000; padding-bottom: 10px; margin-top: 10px; margin-bottom: 20px;
        }
        .info-row { font-size: 1.1rem; margin-bottom: 12px; display: flex; align-items: flex-start; }
        .bullet { margin-right: 10px; font-weight: bold; }
        .label { font-weight: bold; min-width: 80px; }
        .content { flex: 1; line-height: 1.5; }
        #paper-content-box {
            background-color: rgba(255,255,255,0.6); padding: 15px; border-radius: 5px; border: 1px solid #000; margin-top: 10px;
            font-size: 1rem; white-space: pre-wrap; word-break: keep-all;
        }

        #button-area {
            width: 90%; max-width: 700px; display: flex; flex-direction: column; gap: 15px; padding-bottom: 20px;
        }
        .action-btn {
            display: flex; align-items: center; padding: 0; background: white; border: 3px solid #000;
            box-shadow: 5px 5px 0px #000; cursor: pointer; transition: transform 0.1s; text-align: left;
        }
        .action-btn:active { transform: translate(3px, 3px); box-shadow: 2px 2px 0px #000; }
        .action-btn:hover { background-color: #f0f0f0; }
        .btn-label {
            padding: 15px 20px; font-size: 1.2rem; font-weight: bold; color: white;
            border-right: 3px solid #000; min-width: 100px; text-align: center;
        }
        .btn-text { padding: 15px; font-size: 1.1rem; color: #000; font-weight: bold; flex: 1; word-break: keep-all; }
        .theme-green .btn-label { background-color: #27ae60; }
        .theme-red .btn-label { background-color: #c0392b; }
        .theme-blue .btn-label { background-color: #2980b9; }
        .theme-purple .btn-label { background-color: #8e44ad; }

        #modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 100;
        }
        .modal-paper {
            background: white; color: #000; border: 4px solid #000; padding: 30px; width: 500px;
            text-align: center; box-shadow: 10px 10px 0px #333; transform: rotate(1deg);
        }
        .modal-title { font-weight: 900; font-size: 2.2rem; margin-bottom: 20px; }
        .next-btn {
            background: #000; color: white; border: none; padding: 10px 30px; font-size: 1.2rem; margin-top: 20px; cursor: pointer; font-weight: bold;
        }

        /* === ì—”ë”© í˜ì´í¼ ìŠ¤íƒ€ì¼ === */
        .ending-paper {
            background-color: #fff !important; 
            transform: rotate(0deg) !important; 
            max-height: 75vh !important; overflow-y: auto !important;
            display: flex; flex-direction: column;
        }
        .ending-content {
            font-size: 1.1rem !important; line-height: 1.8 !important;
            padding: 20px !important; background-color: transparent !important; border: none !important;
            flex: 1; word-break: keep-all;
        }
        .fail-theme { border: 4px solid #d63031 !important; }
        .fail-theme #paper-title { color: #d63031 !important; border-bottom: 4px solid #d63031 !important; text-align: center; margin-top: 0 !important; }
        .success-theme { border: 4px solid #27ae60 !important; }
        .success-theme #paper-title { color: #27ae60 !important; border-bottom: 4px solid #27ae60 !important; text-align: center; margin-top: 0 !important; }
        .stamp {
            margin-top: 30px; text-align: right; font-weight: bold; font-size: 1.3rem;
            position: relative; margin-bottom: 20px;
        }
        .stamp::after {
            content: 'ì¸'; position: absolute; top: -10px; right: -10px;
            border: 3px solid; border-radius: 50%; width: 50px; height: 50px;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.4rem; transform: rotate(-15deg); opacity: 0.7;
            color: inherit; border-color: inherit;
        }
        .restart-btn {
            display: block; margin: 20px auto 30px; padding: 12px 30px;
            color: white; border: none; border-radius: 5px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer;
            transition: transform 0.1s; box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        .restart-btn:hover { transform: scale(1.05); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(5px); } }
        @keyframes titlePulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }

        /* === ì¢…ì´ êµì²´ ì• ë‹ˆë©”ì´ì…˜ === */
        .paper-slide-out { animation: slideOutLeft 0.5s forwards; }
        .paper-slide-in { animation: slideInRight 0.5s forwards; }

        @keyframes slideOutLeft {
            to { transform: translateX(-150%) rotate(-5deg); opacity: 0; }
        }
        @keyframes slideInRight {
            from { transform: translateX(150%) rotate(5deg); opacity: 0; }
            to { transform: translateX(0) rotate(-1deg); opacity: 1; }
        }

        /* í™”ë©´ ì „í™˜ */
        .fade-out-screen { opacity: 0 !important; transition: opacity 1s ease; pointer-events: none; }
        .game-enter-active { opacity: 0; animation: slideUpFade 1.2s ease-out forwards; }
        @keyframes slideUpFade {
            0% { opacity: 0; transform: translateY(50px) scale(0.98); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

    </style>
</head>
<body>

    <!-- ë°°ê²½ -->
    <div class="game-bg"></div>

    <!-- ëœë”© -->
    <div id="landing-screen">
        <h1 class="landing-title">Viral Times</h1>
        <div class="landing-subtitle">ì§„ì‹¤ê³¼ ê±°ì§“ì˜ ê²½ê³„, ë‹¹ì‹ ì˜ ì„ íƒì€?</div>
        <button class="main-start-btn" onclick="startIntro()">ê²Œì„ ì‹œì‘í•˜ê¸°</button>
    </div>

    <!-- ì¸íŠ¸ë¡œ -->
    <div id="intro-screen">
        <h1 class="intro-title">Viral Times</h1>
        <div class="intro-text" id="typewriter-text"></div>
        <button class="start-btn" onclick="goToStory()">ì…ì‚¬ ìˆ˜ë½ ë° ì¶œê·¼í•˜ê¸°</button>
    </div>

    <!-- ìŠ¤í† ë¦¬ -->
    <div id="story-screen">
        <div class="story-narration">
            ì´ìˆ˜í˜¸ëŠ” 2025ë…„ 10ì›” 12ì¼,<br>
            KMS ë°©ì†¡êµ­ìœ¼ë¡œ ì²« ì¶œê·¼ì„ í•œë‹¤.<br><br>
            ì£¼ì„ ë°•ì„œì§„ì—ê²Œ ì—…ë¬´ë¥¼ ì „ë‹¬ë°›ëŠ”ë‹¤.
        </div>
        <div class="dialogue-box">
            <div class="speaker-name">ì£¼ì„ ë°•ì„œì§„</div>
            <div class="dialogue-text">
                â€œë„ˆê°€ í•  ì¼ì€ ê°„ë‹¨í•´.<br>
                ì •ë³´ì˜ ì¶œì²˜, ë‚´ìš© ì‘ì„± ë‚ ì§œë¥¼ í™•ì¸í•˜ê±°ë‚˜<br>
                ë„ˆê°€ ì§ì ‘ ì¸í„°ë„·ì—ì„œ ìë£Œë¥¼ ì°¾ì•„ë´ì„œ<br>
                ì •ë³´ë¥¼ ê¸°ì‚¬í™”í• ì§€ ë§ì§€ ê²°ì •í•˜ë©´ ë¼.<br><br>
                ê·¸ëŸ¼ ê³§ë°”ë¡œ ì‹œì‘í•´ë³¼ê¹Œ?â€
            </div>
        </div>
        <button class="go-btn" onclick="startActualGame()">ë„¤, ì•Œê² ìŠµë‹ˆë‹¤! (ì—…ë¬´ ì‹œì‘)</button>
    </div>

    <!-- [NEW] ë‚ ì§œ ë° ì´ë²¤íŠ¸ ì»·ì‹  -->
    <div id="day-transition-screen">
        <div id="day-transition-text">DAY 01</div>
        <div id="day-transition-event"></div>
    </div>

    <!-- ê¸´ê¸‰ ì œë³´ ì•Œë¦¼ì°½ -->
    <div id="turn-notification"></div>

    <!-- [NEW] ìŠ¤ë§ˆíŠ¸í° UI -->
    <div id="smartphone-container">
        <div id="smartphone-btn" onclick="togglePhone()">
            ğŸ“±<span id="msg-badge">N</span>
        </div>
        <div id="smartphone-screen">
            <div class="phone-header">
                <span>ë©”ì‹œì§€</span>
                <span class="close-phone" onclick="togglePhone()">âœ–</span>
            </div>
            <div class="phone-body" id="phone-msg-list">
                <!-- ë©”ì‹œì§€ê°€ ì—¬ê¸°ì— ìŒ“ì„ -->
            </div>
        </div>
    </div>

    <!-- ëŒ€í™” ì˜¤ë²„ë ˆì´ -->
    <div id="dialogue-overlay">
        <div class="npc-dialogue-area" id="npc-area" style="display:none;">
            <div class="npc-name" id="npc-name">ì´ë¦„</div>
            <div class="npc-text" id="npc-text">ëŒ€í™” ë‚´ìš©</div>
            <div class="next-arrow">â–¼</div>
        </div>
        <div class="player-choice-area" id="player-area" style="display:none;"></div>
    </div>

    <!-- ìƒë‹¨ ë°” -->
    <div id="top-bar">
        <div class="stat-item">ğŸ“… <span id="day-display">DAY 01</span></div>
        <div class="stat-item">ğŸ’° ìˆ˜ìµ: <span id="money-display">0</span> ë§Œì›</div>
        <div class="stat-item">â™¥ í‰íŒ: <span id="rep-display">100</span>/100</div>
        <div class="stat-item">ğŸ”” ì´ë²¤íŠ¸: <span id="event-display" style="font-size:0.9rem;">ì—†ìŒ</span></div>
    </div>

    <!-- ì±…ìƒ -->
    <div id="desk-area">
        <div id="paper">
            <div id="paper-title">[ì·¨ì¬íŒŒì¼] #001</div>
            <div id="metadata-area">
                <div class="info-row"><span class="bullet">â€¢</span><span class="label">ì •ë³´ ì¶œì²˜:</span><span class="content" id="paper-source"></span></div>
                <div class="info-row"><span class="bullet">â€¢</span><span class="label">ì‘ì„±ì:</span><span class="content" id="paper-author"></span></div>
                <div class="info-row"><span class="bullet">â€¢</span><span class="label">ì‘ì„±ì¼:</span><span class="content" id="paper-date"></span></div>
            </div>
            <div class="info-row" style="flex-direction: column;">
                <div style="display:flex;" id="content-label-row"><span class="bullet">â€¢</span><span class="label">ì •ë³´ ìš”ì•½:</span></div>
                <div id="paper-content-box"></div>
            </div>
        </div>
        <div id="button-area"></div>
    </div>

    <!-- ê²°ê³¼ ëª¨ë‹¬ -->
    <div id="modal-overlay">
        <div class="modal-paper">
            <div class="modal-title" id="modal-title">ê²°ê³¼ ë³´ê³ </div>
            <p id="modal-msg" style="font-size: 1.2rem; font-weight: bold;">ê²°ê³¼ ë©”ì‹œì§€</p>
            <div id="modal-impact" style="background:#eee; padding:10px; margin-top:10px; font-size:0.95rem; line-height:1.5;">ì‚¬íšŒì  ì˜í–¥</div>
            <button class="next-btn" onclick="nextStep()">ë‹¤ìŒ ì—…ë¬´ â–¶</button>
        </div>
    </div>

    <script>
        // === ì¸íŠ¸ë¡œ & ê¸°ë³¸ í•¨ìˆ˜ ===
        const introTextContent = `ê·€í•˜ëŠ” KMS ë°©ì†¡êµ­ì˜ ê±´ê°•ë¶€ ì˜¨ë¼ì¸ ìˆ˜ìŠµê¸°ìë¡œ ì±„ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.\n\në¹ ë¥´ê²Œ ë³€í•˜ëŠ” ë¯¸ë””ì–´ í™˜ê²½ ì†ì—ì„œ, ë‹¹ì‹ ì˜ ì„ë¬´ëŠ” ë‹¨ í•˜ë‚˜.\nìê·¹ì ì´ê³  í¥ë¯¸ë¡œìš´ ê±´ê°• ê¸°ì‚¬ë¥¼ ë°œí–‰í•˜ì—¬ ë°©ì†¡êµ­ì˜ 'ìˆ˜ìµ'ì„ ì˜¬ë¦¬ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ ê¸°ì–µí•˜ì‹­ì‹œì˜¤. ê¸°ìì˜ ìƒëª…ì€ 'í‰íŒ'ì…ë‹ˆë‹¤.\në‹¨ í•˜ë‚˜ì˜ ì˜¤ë³´ê°€ ë‹¹ì‹ ì˜ ê²½ë ¥ì„ ëë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì§„ì‹¤ê³¼ ê±°ì§“ì˜ ê²½ê³„ì—ì„œ, ë‹¹ì‹ ì€ ì–´ë–¤ ê¸°ìê°€ ë˜ê² ìŠµë‹ˆê¹Œ?`;

        function startIntro() {
            document.getElementById('landing-screen').style.display = 'none';
            document.getElementById('intro-screen').style.display = 'flex';
            typeWriter();
        }

        function typeWriter() {
            const el = document.getElementById('typewriter-text');
            if (el.innerHTML.length > 0) return; 
            let i = 0; const speed = 30; 
            function type() {
                if (i < introTextContent.length) {
                    el.innerHTML += introTextContent.charAt(i) === '\n' ? '<br>' : introTextContent.charAt(i);
                    i++; setTimeout(type, speed);
                }
            }
            type();
        }

        function goToStory() {
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('story-screen').style.display = 'flex';
        }

        function startActualGame() {
            const storyScreen = document.getElementById('story-screen');
            const topBar = document.getElementById('top-bar');
            const deskArea = document.getElementById('desk-area');
            const phone = document.getElementById('smartphone-container');
            
            storyScreen.classList.add('fade-out-screen');
            setTimeout(() => {
                storyScreen.style.display = 'none'; 
                topBar.style.display = 'flex';
                deskArea.style.display = 'flex';
                phone.style.display = 'block'; // í° ë“±ì¥
                
                topBar.classList.add('game-enter-active');
                deskArea.classList.add('game-enter-active');
                renderScenario();
                
                // ì²« ë©”ì‹œì§€ ì „ì†¡
                setTimeout(() => sendPhoneMessage("ë°•ì„œì§„ ì£¼ì„", "ì‹ ì…, ê¸´ì¥ í’€ê³  ì˜í•´ë´. ì²« ê¸°ì‚¬ ê¸°ëŒ€í•œë‹¤."), 2000);
            }, 1000);
        }

        // === Day Transition Logic ===
        function showDayTransition(dayNum, eventName, callback) {
            const screen = document.getElementById('day-transition-screen');
            const dayText = document.getElementById('day-transition-text');
            const eventText = document.getElementById('day-transition-event');
            
            dayText.innerText = "DAY 0" + dayNum;
            if (eventName && eventName !== "ì—†ìŒ") {
                eventText.innerText = `< ì´ìŠˆ: ${eventName} >`;
            } else {
                eventText.innerText = "";
            }

            screen.style.display = 'flex';
            dayText.classList.remove('day-anim-active');
            eventText.classList.remove('day-anim-active');
            void dayText.offsetWidth; // Reflow
            dayText.classList.add('day-anim-active');
            eventText.classList.add('day-anim-active');

            setTimeout(() => {
                screen.style.display = 'none';
                if(callback) callback();
            }, 3000); 
        }

        // === [NEW] ìŠ¤ë§ˆíŠ¸í° ê¸°ëŠ¥ ===
        function togglePhone() {
            const screen = document.getElementById('smartphone-screen');
            const badge = document.getElementById('msg-badge');
            
            if (screen.style.display === 'flex') {
                screen.style.display = 'none';
            } else {
                screen.style.display = 'flex';
                badge.style.opacity = '0'; // ë°°ì§€ ìˆ¨ê¹€
                // ìŠ¤í¬ë¡¤ ì•„ë˜ë¡œ
                const body = document.getElementById('phone-msg-list');
                body.scrollTop = body.scrollHeight;
            }
        }

        function sendPhoneMessage(sender, text, isSystem = false) {
            const list = document.getElementById('phone-msg-list');
            const div = document.createElement('div');
            
            if (isSystem) {
                div.className = 'msg-bubble system';
                div.innerHTML = text;
            } else {
                div.className = 'msg-bubble';
                div.innerHTML = `<span class="msg-sender">${sender}</span>${text}`;
            }
            
            list.appendChild(div);
            
            // ì•Œë¦¼ ë°°ì§€ í‘œì‹œ
            const screen = document.getElementById('smartphone-screen');
            if (screen.style.display !== 'flex') {
                const badge = document.getElementById('msg-badge');
                badge.style.opacity = '1';
            } else {
                list.scrollTop = list.scrollHeight;
            }
        }

        // === ì‹œë‚˜ë¦¬ì˜¤ ë°ì´í„° ===
        const scenarios = [
            // DAY 1
            { id: "001", day: 1, type: "report", eventName: "ì—†ìŒ", title: "[ì·¨ì¬ íŒŒì¼] #001", source: "ë¯¼ê°„ìš”ë²• ì—°êµ¬ì†Œ 'ìì—°ì˜ ìˆ¨ê²°'", author: "ì†Œì¥ ë°•ë§Œìˆ˜", date: "2025-09-30", content: "ë§ˆëŠ˜, ì½§ì†ì— ë„£ìœ¼ë©´ ë§Œì„± ë¹„ì—¼ 99% ì™„ì¹˜! ë³‘ì› ê°ˆ í•„ìš” ì—†ì–´...", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "ì¶©ê²©! ë³‘ì›ë„ ëª¨ë¥´ëŠ” ë¹„ì—¼ ì™„ì¹˜ë²•?", theme: "theme-green", money: 500, rep: -20, msg: "ìê·¹ì ì¸ ê¸°ì‚¬ë¡œ ìˆ˜ìµ +500ë§Œ! í•˜ì§€ë§Œ ë…ìë“¤ì´ ì‘ê¸‰ì‹¤ì— ì‹¤ë ¤ê°€ë©° í‰íŒ -20.", impact: "ì´ìƒí•œ ë¯¼ê°„ ìš”ë²•ì´ í¼ì ¸ êµ­ë¯¼ë“¤ì˜ ê±´ê°• ì§€ìˆ˜ê°€ ë‚˜ë¹ ì¡ŒìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ê¸°ì‚¬í™”í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: 0, msg: "ê¸°ì‚¬ë¥¼ ë‚´ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ìˆ˜ìµì€ ì—†ì§€ë§Œ í‰íŒì„ ì§€ì¼°ìŠµë‹ˆë‹¤.", impact: "êµ­ë¯¼ë“¤ ì‚¬ì´ì—ì„œ ì´ìƒí•œ ë¯¼ê°„ ìš”ë²•ì´ í¼ì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤." } ] },
            { id: "002", day: 1, type: "report", eventName: "ì—†ìŒ", title: "[ì·¨ì¬ íŒŒì¼] #002", source: "ê±´ê°•ë³µì§€ë¶€", author: "í‘œì‹œ ì•ˆ ë¨", date: "2024-02", content: "í•„ìˆ˜ì˜ë£Œ ì •ì±… ë³´ê³ ì„œ (ë¶ˆê³µì • ì˜ë£Œìƒíƒœê³„ ê°œì„  ì •ì±…)", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "ê±´ê°•ë³µì§€ë¶€, ì˜ë£Œìƒíƒœê³„ ê°œì„  ì •ì±… ì‹œí–‰", theme: "theme-green", money: 100, rep: 10, msg: "ìˆ˜ìµì€ ì ì§€ë§Œ ìœ ìµí•œ ì •ë³´ë¡œ í‰íŒ +10 ìƒìŠ¹!", impact: "êµ­ë¯¼ë“¤ì´ ì •ì±… ì •ë³´ë¥¼ ì•Œê²Œ ë˜ì–´ ë³µì§€ ìˆ˜ì¤€ì´ í–¥ìƒë©ë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ê¸°ì‚¬í™”í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: -5, msg: "íƒ€ ì–¸ë¡ ì‚¬ê°€ ëŒ€ì„œíŠ¹í•„í–ˆìŠµë‹ˆë‹¤. 'KMSëŠ” ëŠë¦¬ë‹¤'ëŠ” ë¹„íŒìœ¼ë¡œ í‰íŒ -5.", impact: "íƒ€ ì–¸ë¡ ì‚¬ ë³´ë„ë¡œ ì •ë³´ëŠ” ì „ë‹¬ë˜ì—ˆìœ¼ë‚˜, ìš°ë¦¬ ë°©ì†¡êµ­ì˜ ì‹ ë¢°ë„ê°€ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤." } ] },
            { id: "004", day: 1, type: "report", eventName: "ì—†ìŒ", title: "[ì·¨ì¬ íŒŒì¼] #004", source: "AI ê²€ìƒ‰ ë¸”ë¡œê·¸", author: "ê¹€í•˜ì§€ë‹ˆ", date: "2025-03-12", content: "í™ì´ˆëŠ” ë§ì´ ë¨¹ì„ìˆ˜ë¡ ì¢‹ë‹¤? ë¶€ì‘ìš© ì—†ìŒ! (ì¶œì²˜ ë¶ˆë¶„ëª…)", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "í™ì´ˆì˜ ë¹„ë°€, ë‹¤ë‹¤ìµì„ ì´ë‹¤!", theme: "theme-green", money: 200, rep: -15, msg: "ìˆ˜ìµ +200ë§Œ. í•˜ì§€ë§Œ ê³¼ì‰ì„­ì·¨ ìœ„ì¥ì¥ì•  ë¹„íŒìœ¼ë¡œ í‰íŒ -15.", impact: "í™ì´ˆ ìˆ˜ìš” ì¦ê°€ì™€ í•¨ê»˜ ìœ„ì¥ì¥ì•  í™˜ìê°€ ëŠ˜ì–´ë‚¬ìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ê¸°ì‚¬í™”í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: 0, msg: "ê²€ì¦ë˜ì§€ ì•Šì€ ì •ë³´ë¥¼ ë§‰ì•˜ìŠµë‹ˆë‹¤. í‰íŒ ìœ ì§€.", impact: "í—ˆìœ„ ì •ë³´ í™•ì‚°ì„ ë§‰ì•˜ìŠµë‹ˆë‹¤." } ] },
            // DAY 2
            { id: "008", day: 2, type: "report", eventName: "í™˜ì ˆê¸° ê°ê¸° ìœ í–‰", title: "[ì·¨ì¬ íŒŒì¼] #008", source: "í•œêµ­ëŒ€í•™êµ", author: "êµìˆ˜ ë…¸ìœ¤ì„œ", date: "2025-10-06", content: "ë°©ì„ ê· ì—ì„œ ìŠˆí¼ë°•í…Œë¦¬ì•„ë¥¼ ì–µì œí•˜ëŠ” ë¬¼ì§ˆ ë°œê²¬!", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "ìŠˆí¼ë°•í…Œë¦¬ì•„ ì¡ëŠ” ë¬¼ì§ˆ ë°œê²¬!", theme: "theme-green", money: 100, rep: 0, msg: "ìƒˆë¡œìš´ ê³¼í•™ ì§€ì‹ì„ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤. ìˆ˜ìµ +100ë§Œ.", impact: "ì‚¬ëŒë“¤ì—ê²Œ ìƒˆë¡œìš´ ì§€ì‹ì´ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ê¸°ì‚¬í™”í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: 0, msg: "ì•„ë¬´ëŸ° ë³€í™”ê°€ ì—†ìŠµë‹ˆë‹¤.", impact: "ì•„ë¬´ ë³€í™” ì—†ìŒ." } ] },
            { id: "011", day: 2, type: "report", eventName: "í™˜ì ˆê¸° ê°ê¸° ìœ í–‰", title: "[ì·¨ì¬ íŒŒì¼] #011", source: "ë‹¬í‰ í—ˆë¸Œ ì—°êµ¬ì†Œ", author: "ì—°êµ¬ì› ê¹€ì¢…ìš°", date: "2010-04-24", content: "í—ˆë¸Œ ë¡œì¦ˆë§ˆë¦¬ì˜ í–¥ì´ ëª©ê°ê¸° ì¹˜ë£Œì— ë„ì›€ì´ ëœë‹¤.", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "ë¡œì¦ˆë§ˆë¦¬ í–¥ê¸°, ëª©ê°ê¸°ì— íš¨ê³¼?", theme: "theme-green", money: 200, rep: -10, msg: "ìˆ˜ìµ +200ë§Œ. í•˜ì§€ë§Œ 2010ë…„ ìë£Œì´ë©° íš¨ê³¼ ì—†ìŒì´ ë°í˜€ì§. í‰íŒ -10.", impact: "ìœ ì‚¬ê³¼í•™ì´ í¼ì¡ŒìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ê¸°ì‚¬í™”í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: 0, msg: "ìœ ì‚¬ê³¼í•™ í™•ì‚°ì„ ë§‰ì•˜ìŠµë‹ˆë‹¤.", impact: "ìœ ì‚¬ê³¼í•™ì´ í¼ì§€ëŠ” ê²ƒì„ ë§‰ì•˜ìŠµë‹ˆë‹¤." } ] },
            { id: "013", day: 2, type: "report", eventName: "í™˜ì ˆê¸° ê°ê¸° ìœ í–‰", title: "[ì·¨ì¬ íŒŒì¼] #013", source: "SNS ì¸ë³„ë¦¬í„°", author: "Lingcolin7294", date: "2024-07-19", content: "ì œë¡œ ì¹¼ë¡œë¦¬ ì•„ìŠ¤íŒŒíƒì´ ë‡Œ ê±´ê°•ì—ë„ ì¢‹ë‹¤?", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "ì œë¡œ ì•„ìŠ¤íŒŒíƒ, ë‡Œ ê±´ê°•ê¹Œì§€ ì±™ê¸´ë‹¤?", theme: "theme-green", money: 300, rep: -20, msg: "ìˆ˜ìµ +300ë§Œ. í•˜ì§€ë§Œ ì „ë¬¸ê°€ë“¤ì˜ ë¹„íŒìœ¼ë¡œ í‰íŒ -20.", impact: "ì˜ëª»ëœ ì •ë³´ë¡œ ë‹¨ë§› ì¤‘ë… í™˜ìê°€ ì¦ê°€í–ˆìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ê¸°ì‚¬í™”í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: 0, msg: "í—ˆìœ„ ì‚¬ì‹¤ ìœ í¬ë¥¼ ë§‰ì•˜ìŠµë‹ˆë‹¤.", impact: "í—ˆìœ„ ì •ë³´ê°€ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤." } ] },
            // DAY 3
            { 
                id: "event_day3", day: 3, type: "event", eventName: "ë°©ë¬¸ì ë°œìƒ",
                // [NEW] ë‡Œë¬¼ ì œì•ˆ ë©”ì‹œì§€ ì˜ˆì•½
                phoneMsg: { sender: "ë°œì‹ ì í‘œì‹œì œí•œ", text: "ê³„ì¢Œ í™•ì¸í•´ë³´ì„¸ìš”. ì„­ì„­ì§€ ì•Šê²Œ ë„£ì—ˆìŠµë‹ˆë‹¤." },
                dialogueScript: [ { speaker: "narrator", text: "ëˆ„êµ°ê°€ê°€ ë‹¹ì‹ ì˜ ì‚¬ë¬´ì‹¤ë¡œ ì°¾ì•„ì™”ìŠµë‹ˆë‹¤." }, { speaker: "ë‹¹ì‹ ", text: "ì‹¤ë¡€ì§€ë§Œ, ëˆ„êµ¬ì‹ ê°€ìš”?" }, { speaker: "ì˜ë¬¸ì˜ ì‚¬ëŒ", text: "ì†Œê°œê°€ ëŠ¦ì—ˆë„¤ìš”. ì €ëŠ” ìŠ¤í¬ì¸ í•˜ë¹„ì‚¬ì˜ ë§¤ë‹ˆì € í•œì‹œìœ¨ì…ë‹ˆë‹¤." }, { speaker: "ë‹¹ì‹ ", text: "ë¬´ìŠ¨ ì¼ë¡œ ì˜¤ì…¨ë‚˜ìš”?" }, { speaker: "í•œì‹œìœ¨", text: "ë³¸ë¡ ë§Œ ë§í•˜ì£ . ê³§ ìˆìœ¼ë©´ ë¯¼ì„¤ëŒ€í•™êµì˜ ë…¼ë¬¸ì´ ê·¸ìª½ìœ¼ë¡œ ê°ˆ ê²ë‹ˆë‹¤.<br>ë¹„ìš©ì„ ë“œë¦´í…Œë‹ˆ ê·¸ ì •ë³´ëŠ” íê¸°í•´ì£¼ì‹­ì‡¼." }, { speaker: "ë‹¹ì‹ ", text: "ì–¸ë¡  ì¡°ì‘ì„ í•˜ë¼ëŠ” ê±´ê°€ìš”?" }, { speaker: "í•œì‹œìœ¨", text: "í•˜í•˜í•˜! ì €ëŠ” ê·¸ì € â€˜ê¶Œê³ â€™ë¥¼ í•´ë“œë ¸ì„ ë¿ì…ë‹ˆë‹¤.<br>ê·¸ ë“£ë³´ì¡ ì§€ë°©ëŒ€ì˜ ì •ë³´ëŠ” ë”± ë³´ê¸°ì—ë„ ë¯¿ì„ ë§Œí•œ ê²ƒì´ ëª» ë  ê²ƒ ê°™ì§€ ì•Šë‚˜ìš”?<br>ê·¸ëŸ¼ ë‹¹ì‹ ì—ê²Œ ë§¡ê¸°ê² ìŠµë‹ˆë‹¤. ì•ˆë…•íˆê³„ì‹­ì‹œì˜¤." } ], title: "[ì·¨ì¬ íŒŒì¼ #015]", source: "ë¯¼ì„¤ëŒ€í•™êµ", author: "ëŒ€í•™ì›ìƒ ì´í•œìŠ¹", date: "2025ë…„ 10ì›” 1ì¼", content: "â€œìœ ëª…í•œ ìŠ¤í¬ì¸ í•˜ë¹„ì‚¬ì˜ ìŠ¤í¬ì¸  ë“œë§í¬ê°€ ì‹¬ì¥ì— ì§ì ‘ì ìœ¼ë¡œ ì†ìƒì„ ì¤€ë‹¤.â€", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "(ì œì•ˆ ê±°ì ˆ) ì¶©ê²©! ë“œë§í¬ì˜ ì‹¬ì¥ ì†ìƒ ìœ„í—˜", theme: "theme-green", money: 100, rep: 0, msg: "íˆ¬ìê°€ ëŠê²¨ ìˆ˜ìµì´ ê°ì†Œí–ˆë‹¤ê°€ íšŒë³µ(+100ë§Œ). í‰íŒ ìœ ì§€.", impact: "ìŠ¤í¬ì¸ í•˜ë¹„ì‚¬ ë§¤ì¶œ ê°ì†Œ. êµ­ë¯¼ ê±´ê°•ì„ ì§€ì¼°ìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ë‡Œë¬¼ ìˆ˜ë½) ë³´ë„í•˜ì§€ ì•ŠìŒ", theme: "theme-purple", money: 700, rep: 0, msg: "ë‡Œë¬¼ë¡œ ìˆ˜ìµ +700ë§Œ. í‰íŒ ë³€í™” ì—†ìŒ(ë“¤í‚¤ì§€ ì•ŠìŒ).", impact: "ì‹¬ì¥ë³‘ ë°œë³‘ë¥ ì´ ë†’ì•„ì§„ ê²ƒ ê°™ì§€ë§Œ... í†µì¥ ì”ê³ ëŠ” ë‘ë‘‘í•©ë‹ˆë‹¤." } ] 
            },
            
            // === ì—°ê³„ì„± ê°•í™”ëœ ë‹¤ì¤‘ í˜ì´ì§€ ===
            { 
                id: "016_multi", day: 3, type: "report", eventName: "ìƒë°˜ëœ ìë£Œ ë„ì°©", isMultiPage: true, 
                pages: [ 
                    { 
                        title: "[ì·¨ì¬ íŒŒì¼ #016]", source: "ëŒ€ê±´ëŒ€í•™ë³‘ì› ê°€ì •ì˜í•™ê³¼", author: "ê¹€ì˜ìˆ˜ êµìˆ˜", date: "2025-10-10", 
                        content: "ìµœê·¼ 10ë…„ê°„ êµ­ë¯¼ ê±´ê°• ë°ì´í„° ë¶„ì„ ê²°ê³¼, ì•„ì¹¨í˜• ì¸ê°„ì´ ì €ë…í˜• ì¸ê°„ë³´ë‹¤ ëŒ€ì‚¬ì¦í›„êµ° ë°œë³‘ë¥ ì´ 1.3ë°° ë‚®ìŒ." 
                    }, 
                    { 
                        title: "[ì·¨ì¬ íŒŒì¼ #017] (ì¶”ê°€ ì œë³´)", source: "ëŒ€ê±´ëŒ€í•™ë³‘ì› ë‚´ë¶„ë¹„ëŒ€ì‚¬ë‚´ê³¼", author: "ê¹€ì¼ìˆ˜ êµìˆ˜", date: "2025-10-13", 
                        content: "ì•„ì¹¨í˜• ì¸ê°„ê³¼ ì €ë…í˜• ì¸ê°„ì˜ ëŒ€ì‚¬ì¦í›„êµ°ì€ í†µê³„ì  ìœ ì˜ë¯¸ì„±ì¼ ë¿ ì•„ë¬´ëŸ° ì¸ê³¼ê´€ê³„ê°€ ì—†ë‹¤.",
                        transitionAlert: "ğŸš¨ ê¸´ê¸‰ ì œë³´ ë„ì°©!\n\n'ì•ì„  ìë£ŒëŠ” í†µê³„ì  ì˜¤ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤.'\në°˜ë°• ìë£Œë¥¼ í™•ì¸í•˜ì‹­ì‹œì˜¤."
                    } 
                ], 
                choices: [ 
                    { label: "ê¸°ì‚¬ ë°œí–‰", text: "ì•„ì¹¨í˜• ì¸ê°„ í•„ìˆ˜! ì•ˆ í•˜ë©´ ëŒ€ì‚¬ì¦í›„êµ°?", theme: "theme-green", money: 700, rep: -30, msg: "ìê·¹ì  ì œëª©ìœ¼ë¡œ ìˆ˜ìµ +700ë§Œ! ê·¸ëŸ¬ë‚˜ ì—°êµ¬ ì™œê³¡ìœ¼ë¡œ ì •ì •ë³´ë„ ìš”ì²­. í‰íŒ -30.", impact: "ì•„ì¹¨í˜• ì¸ê°„ ê°•ë°•ì¦ì´ ì‚¬íšŒì— í¼ì¡ŒìŠµë‹ˆë‹¤." }, 
                    { label: "íŒ©íŠ¸ ì²´í¬", text: "'ì•„ì¹¨í˜• ì¸ê°„=ê±´ê°•' ì¸ê³¼ê´€ê³„ ë¶ˆëª…í™•", theme: "theme-blue", money: 400, rep: 10, msg: "ìˆ˜ìµ +400ë§Œ. ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì–¸ë¡  í‰íŒ +10.", impact: "êµ­ë¯¼ë“¤ì˜ ê±´ê°• ìƒì‹ì´ í•œì¸µ ì„±ìˆ™í•´ì¡ŒìŠµë‹ˆë‹¤." }, 
                    { label: "ì •ë³´ íê¸°", text: "(ë³´ë„í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: 0, msg: "ë³´ë„í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.", impact: "ì•„ë¬´ ì˜í–¥ ì—†ìŒ." } 
                ] 
            },

            { id: "020", day: 3, type: "report", eventName: "ì—†ìŒ", title: "[ì·¨ì¬ íŒŒì¼] #020", source: "ìˆí¼ (í† í† ê¸°ì˜ ë„¤ì¼ì•„íŠ¸)", author: "í¬ë¦¬ì—ì´í„°", date: "2025-10-14", content: "ê³„ë€ ë‹¨ë°±ì§ˆì´ ì†í†±ì— ì¢‹ë‹¤? (ì¶œì²˜ëŠ” ë³„ë¡œì§€ë§Œ íŒ©íŠ¸ëŠ” ë§ìŒ)", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "íŠ¼íŠ¼í•œ ì†í†±ì„ ì›í•´? ê³„ë€ì„ ë¨¹ì–´ë¼!", theme: "theme-green", money: 500, rep: 30, msg: "íŒ©íŠ¸ í™•ì¸ í›„ ê¸°ì‚¬í™”! ìœ ìµí•œ ì •ë³´ë¡œ ìˆ˜ìµ +500, í‰íŒ +30.", impact: "ê³„ë€ ë§¤ì¶œì´ ëŠ˜ê³  ì†í†± ê±´ê°•ì— ê´€ì‹¬ì´ ë†’ì•„ì¡ŒìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ê¸°ì‚¬í™”í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: 0, msg: "ìƒì‚¬ê°€ ë‹¹ì‹ ì´ ë„¤ì¼ì•„íŠ¸ì— ê´€ì‹¬ ìˆëŠ” ì¤„ ì˜¤í•´í•©ë‹ˆë‹¤.", impact: "ì•„ë¬´ ì˜í–¥ ì—†ìŒ." } ] },
            // DAY 4
            // === ë°•ì„œì§„ ì£¼ì„ ëŒ€í™” ì´ë²¤íŠ¸ ì¶”ê°€ ===
            { 
                id: "memo_day4", day: 4, type: "report", eventName: "ê¸´ê¸‰ ì§€ì‹œ",
                // [NEW] ë…ì´‰ ë©”ì‹œì§€ ì˜ˆì•½
                phoneMsg: { sender: "ë°•ì„œì§„ ì£¼ì„", text: "ì•¼!!! ê¸°ì‚¬ ì•„ì§ì´ì•¼?? ë‹¤ë¥¸ ë°ì„œ ì„ ìˆ˜ ì¹˜ê² ë‹¤ê³ !!" },
                dialogueScript: [
                    { speaker: "narrator", text: "(ë‹¤ê¸‰í•œ ë°œê±¸ìŒ ì†Œë¦¬ì™€ í•¨ê»˜ ë°•ì„œì§„ ì£¼ì„ì´ ë‹¹ì‹ ì˜ ìë¦¬ë¡œ ë›°ì–´ì˜µë‹ˆë‹¤.)" },
                    { speaker: "ì£¼ì„ ë°•ì„œì§„", text: "ì•¼! ì§€ê¸ˆ í•œê°€í•˜ê²Œ íŒ©íŠ¸ì²´í¬ë‚˜ í•˜ê³  ìˆì„ ë•Œê°€ ì•„ë‹ˆì•¼!" },
                    { speaker: "ë‹¹ì‹ ", text: "ë„¤? ë¬´ìŠ¨ ì¼ì´ì‹œì£ ?" },
                    { speaker: "ì£¼ì„ ë°•ì„œì§„", text: "ì§€ê¸ˆ ì‹¤ì‹œê°„ ê²€ìƒ‰ì–´ 1ìœ„ê°€ 'ìŠˆí¼ í‘¸ë“œ OOO'ì•¼!<br>ì‚¬ëŒë“¤ì´ ë¯¸ì¹œ ë“¯ì´ ê²€ìƒ‰í•˜ê³  ìˆë‹¤ê³ !" },
                    { speaker: "ì£¼ì„ ë°•ì„œì§„", text: "ë‹¤ë¥¸ ì–¸ë¡ ì‚¬ë“¤ì´ ì±„ê°€ê¸° ì „ì— ìš°ë¦¬ê°€ ë¨¼ì € í„°ëœ¨ë ¤ì•¼ í•´.<br>ê²€ì¦ ê°™ì€ ê±´ ë‚˜ì¤‘ì— í•˜ê³  ì¼ë‹¨ ì¡°íšŒìˆ˜ë¶€í„° ë¹¨ì•„ì˜¤ë€ ë§ì´ì•¼!<br>ë‹¹ì¥ ì¨!" }
                ],
                title: "[ê¸´ê¸‰ ì§€ì‹œì‚¬í•­]", 
                source: "ë°•ì„œì§„ ì£¼ì„", author: "ë³´ë„êµ­", date: "2025-10-15 (í˜„ì¬)", 
                content: "ì£¼ì„ ë°•ì„œì§„ì˜ ì§€ì‹œ: \n'ìŠˆí¼ í‘¸ë“œ OOO'ì— ëŒ€í•œ ì°¬ì–‘ ê¸°ì‚¬ë¥¼ ë‹¹ì¥ ì‘ì„±í•  ê²ƒ.\n(ê²€ì¦ ì ˆì°¨ ìƒëµ ìš”êµ¬)", 
                choices: [ 
                    { label: "ì§€ì‹œ ì´í–‰", text: "ì—´í’! ìŠˆí¼ í‘¸ë“œ OOO, ì•ˆ ë¨¹ì–´ë³¸ ì‚¬ëŒ ì—†ë‹¤?", theme: "theme-green", money: 1200, rep: -40, msg: "ìˆ˜ìµ +1200ë§Œ í­ì¦! ê·¸ëŸ¬ë‚˜ ì¤‘ê¸ˆì† ê²€ì¶œ ë°œí‘œë¡œ ìµœì•…ì˜ ì˜¤ë³´ ì‚¬íƒœ. í‰íŒ -40.", impact: "ìˆ˜ë§ì€ ì‚¬ëŒë“¤ì´ ì¤‘ê¸ˆì† ì¤‘ë… í”¼í•´ë¥¼ ì…ì—ˆìŠµë‹ˆë‹¤.", jumpTo: 2 }, 
                    { label: "ì‚¬ì‹¤ í™•ì¸", text: "(ë³´ë¥˜í•˜ê³  ì‹ì•½ì²˜ ìë£Œ í™•ì¸)", theme: "theme-blue", money: 0, rep: 0, msg: "ë‹¹ì‹ ì€ ê¸°ì‚¬ë¥¼ ë³´ë¥˜í•˜ê³  ì‹ì•½ì²˜ ìë£Œë¥¼ ì°¾ì•„ë´…ë‹ˆë‹¤.", impact: "íŒ©íŠ¸ ì²´í¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.", jumpTo: 1 } 
                ] 
            },
            { id: "022", day: 4, type: "report", eventName: "ê¸´ê¸‰ ì§€ì‹œ", title: "[ì·¨ì¬ íŒŒì¼] #022", source: "ì‹í’ˆì˜ì•½í’ˆì•ˆì „ì²˜", author: "ê³µì‹ ë°œí‘œ", date: "2025-10-15", content: "ìŠˆí¼ í‘¸ë“œ OOOì—ì„œ ë¹„ì†Œ, ì¹´ë“œë®´ ë“± ì¤‘ê¸ˆì† ê¸°ì¤€ì¹˜ ì´ˆê³¼ ê²€ì¶œ.", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "ê²½ì•…! ìŠˆí¼ í‘¸ë“œ OOOì— ì¤‘ê¸ˆì† ë‹¤ëŸ‰ ê²€ì¶œ", theme: "theme-green", money: 900, rep: 50, msg: "íŠ¹ì¢…! ìˆ˜ìµ +900ë§Œ. êµ­ë¯¼ ê±´ê°•ì„ ì§€í‚¨ ì •ì§í•œ ì–¸ë¡ ìœ¼ë¡œ í‰íŒ +50 ëŒ€í­ë°œ!", impact: "ì¤‘ê¸ˆì† í”¼í•´ë¥¼ ë§‰ê³  ì—„ì²­ë‚œ ì‹ ë¢°ë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ë³´ë„í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: -20, msg: "ëŠ‘ì¥ ëŒ€ì‘ìœ¼ë¡œ ë¹„íŒ ë°›ìŒ. í‰íŒ -20.", impact: "ë§ì€ ì‚¬ëŒë“¤ì´ ì •ë³´ë¥¼ ëŠ¦ê²Œ ì ‘í•´ í”¼í•´ë¥¼ ì…ì—ˆìŠµë‹ˆë‹¤." } ] },
            { id: "023", day: 4, type: "report", eventName: "ê¸´ê¸‰ ì§€ì‹œ", title: "[ì·¨ì¬ íŒŒì¼] #023", source: "ì˜ì „íšŒì‚¬ ì‚°í•˜ ì—°êµ¬ì†Œ", author: "ì—°êµ¬ì› ì¼ë™", date: "2025-10-15", content: "3ì¼ ë§Œì— í†µì¦ ì™„í™”! ì§€ê¸ˆ ë°”ë¡œ ì£¼ë¬¸í•˜ì„¸ìš” (ë§í¬ í¬í•¨)", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "[ë‹¨ë…] 3ì¼ ë§Œì— í†µì¦ ì™„í™”? ì‹ ì•½ íš¨ëŠ¥ ì…ì¦", theme: "theme-green", money: 300, rep: -25, msg: "ê´‘ê³ ì„± ê¸°ì‚¬ ë¹„íŒ! í‰íŒ -25, ìˆ˜ìµ +300.", impact: "ë…ìë“¤ì˜ í•­ì˜ê°€ ë¹—ë°œì¹©ë‹ˆë‹¤." }, { label: "ê´‘ê³ íŒ€ ì´ê´€", text: "(ê´‘ê³ ë¡œ ë„˜ê¹€)", theme: "theme-blue", money: 30, rep: 0, msg: "ê¸°ì‚¬ ëŒ€ì‹  ê´‘ê³ ë¡œ ë„˜ê¹€. ìˆ˜ìµ ì†Œí­(+30) ë°œìƒ.", impact: "ë³„ë‹¤ë¥¸ ì˜í–¥ ì—†ìŒ." }, { label: "ì •ë³´ íê¸°", text: "(íê¸°í•¨)", theme: "theme-red", money: 0, rep: 0, msg: "íê¸°í–ˆìŠµë‹ˆë‹¤.", impact: "ì˜í–¥ ì—†ìŒ." } ] },
            { id: "event_day4_bribe", day: 4, type: "event", eventName: "ë°©ë¬¸ì ë°œìƒ", title: "[ì´ë²¤íŠ¸] ì•ˆì‹¬ì œì•½ ë§ˆì¼€íŒ…ë¶€", source: "ì•ˆì‹¬ì œì•½", author: "ì•ˆì€ìœ¨", date: "í˜„ì¬", content: "ë°©ë¬¸ì: 'ë³´ë„ìë£Œ ê·¸ëŒ€ë¡œ ì¨ì£¼ì‹œë©´ ê´‘ê³ ë¹„ 2,000ë§Œì› ì¦‰ì‹œ ì…ê¸ˆí•´ë“œë¦½ë‹ˆë‹¤.'", choices: [ { label: "ì œì•ˆ ìˆ˜ë½", text: "(ê´‘ê³ ë¹„ ë°›ê³  ê¸°ì‚¬ ì‘ì„±)", theme: "theme-purple", money: 2000, rep: -50, msg: "ìˆ˜ìµ +2,000ë§Œ! í•˜ì§€ë§Œ ë‚´ë¶€ ê°ì‚¬ì— ê±¸ë ¤ 'ë¶€ì • ì²­íƒ' ì§•ê³„. í‰íŒ -50.", impact: "ì˜ì–‘ì œ íš¨ê³¼ëŠ” ì—†ì—ˆê³ , ë‹¹ì‹ ì˜ ë¹„ë¦¬ê°€ ì†Œë¬¸ë‚¬ìŠµë‹ˆë‹¤." }, { label: "ì œì•ˆ ê±°ì ˆ", text: "(ê±°ì ˆí•¨)", theme: "theme-red", money: 0, rep: 0, msg: "ê±°ì ˆí–ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì²­ë ´í•¨ì´ ë¹›ë‚©ë‹ˆë‹¤.", impact: "ì•„ë¬´ ì˜í–¥ ì—†ìŒ." } ] },
            // DAY 5
            // [NEW] Day 5 Intro Event - Audit Warning
            {
                id: "event_day5_audit", day: 5, type: "event", eventName: "ë°©ì†¡êµ­ ê°ì‚¬ ì˜ˆì •",
                // [NEW] ê°ì‚¬ ê´€ë ¨ ë©”ì‹œì§€ ì˜ˆì•½
                phoneMsg: { sender: "ë™ê¸° ê¹€ì² ìˆ˜", text: "ì§€ê¸ˆ ê°ì‚¬íŒ€ 3ì¸µ ë„ì°©. ì±…ìƒ ì •ë¦¬í•´." },
                dialogueScript: [
                    { speaker: "narrator", text: "(í‰ì†Œì™€ ë‹¬ë¦¬ ì‚¬ë¬´ì‹¤ ë¶„ìœ„ê¸°ê°€ ë¬´ê²ìŠµë‹ˆë‹¤. ë°•ì„œì§„ ì£¼ì„ì´ ë‹¹ì‹ ì—ê²Œ ë‹¤ê°€ì˜µë‹ˆë‹¤.)" },
                    { speaker: "ì£¼ì„ ë°•ì„œì§„", text: "ì–´ì´, ìˆ˜ìŠµ. ì˜¤ëŠ˜ ë¬´ìŠ¨ ë‚ ì¸ì§€ ì•Œì§€?" },
                    { speaker: "ë‹¹ì‹ ", text: "ë‹¬ë ¥ì„ ë³´ë‹ˆ... ë°©ì†¡êµ­ ê°ì‚¬ ë‚ ì´ë„¤ìš”." },
                    { speaker: "ì£¼ì„ ë°•ì„œì§„", text: "ê·¸ë˜. ì˜¤ëŠ˜ ê°ì‚¬íŒ€ì´ ë“¤ì´ë‹¥ì³ì„œ ìš°ë¦¬ê°€ ì“´ ê¸°ì‚¬ë“¤ì„ ì´ ì¡ë“¯ì´ ë’¤ì§ˆ ê±°ì•¼." },
                    { speaker: "ì£¼ì„ ë°•ì„œì§„", text: "ë§Œì•½ ì˜¤ëŠ˜ <b>í—ˆìœ„ ì‚¬ì‹¤</b>ì„ ìœ í¬í•˜ê±°ë‚˜, ê¸°ì—…ê³¼ ìœ ì°©í•´ì„œ <b>í¸íŒŒ ë³´ë„</b>ë¥¼ í•œ ê²Œ ê±¸ë¦¬ë©´..." },
                    { speaker: "ì£¼ì„ ë°•ì„œì§„", text: "ê·¸ ìë¦¬ì—ì„œ ë°”ë¡œ <b>ì§ ì‹¸ì„œ ë‚˜ê°€ì•¼ í•  ê±°ì•¼.</b> ìˆ˜ìŠµì´ë¼ê³  ë´ì£¼ëŠ” ê±° ì—†ë‹¤." },
                    { speaker: "ë‹¹ì‹ ", text: "(ì¹¨ì„ ê¼´ê¹ ì‚¼í‚¨ë‹¤) ëª…ì‹¬í•˜ê² ìŠµë‹ˆë‹¤." },
                    { speaker: "ì£¼ì„ ë°•ì„œì§„", text: "ì˜¤ëŠ˜ ë“¤ì–´ì˜¤ëŠ” ì •ë³´ë“¤ì€ íŠ¹íˆ ë” ê¼¼ê¼¼í•˜ê²Œ í™•ì¸í•´. í•œ ë²ˆì˜ ì‹¤ìˆ˜ê°€ ëì¥ì´ì•¼. ì•Œê² ì–´?" }
                ],
                title: "[ì‚¬ë‚´ ê³µì§€] ì •ê¸° ê°ì‚¬ ì‹¤ì‹œ",
                source: "KMS ê°ì‚¬íŒ€", author: "ê°ì‚¬íŒ€ì¥", date: "2025-10-16",
                content: "ê¸ˆì¼ 09:00ë¶€í„° ë³´ë„êµ­ ì •ê¸° ê°ì‚¬ê°€ ì‹¤ì‹œë©ë‹ˆë‹¤.\n\nì£¼ìš” ì ê²€ ì‚¬í•­:\n1. ê¸°ì‚¬ ë‚´ìš©ì˜ ì‚¬ì‹¤ ì—¬ë¶€ (íŒ©íŠ¸ ì²´í¬)\n2. ê´‘ê³ ì„±/í¸íŒŒì„± ë³´ë„ ì—¬ë¶€\n\nìœ„ë°˜ ì‚¬í•­ ì ë°œ ì‹œ ë‚´ê·œì— ë”°ë¼ ì¤‘ì§•ê³„ ì²˜ë¦¬í•¨.",
                choices: [
                    { label: "ì—…ë¬´ ì‹œì‘", text: "ë„¤, ì•Œê² ìŠµë‹ˆë‹¤! (ê¸´ì¥í•˜ë©° ì—…ë¬´ ì‹œì‘)", theme: "theme-blue", money: 0, rep: 0, msg: "ê°ì‚¬íŒ€ì˜ ëˆˆì„ í”¼í•´ ì‹¤ì ì„ ì˜¬ë ¤ì•¼ í•©ë‹ˆë‹¤.", impact: "ê¸´ì¥ê° ê³ ì¡°." }
                ]
            },
            { id: "025", day: 5, type: "report", eventName: "ë°©ì†¡êµ­ ê°ì‚¬ ì˜ˆì •", title: "[ì·¨ì¬ íŒŒì¼] #025", source: "ìœ íŠœë²„ 'ë‹¥í„° íŒ©íŠ¸'", author: "í˜„ì§ ì˜ì‚¬", date: "2025-10-09", content: "ìƒê¸°í”ŒëŸ¬ìŠ¤ ì˜ì–‘ì œëŠ” ì‚¬ê¸°ê·¹ì´ë‹¤! ì‹ì•½ì²˜ì™€ ê²°íƒí–ˆë‹¤! (í™•ì¸ í•„ìš”)", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "80ë§Œ ì˜ì‚¬ ìœ íŠœë²„, 'ì˜ì–‘ì œëŠ” ì‚¬ê¸°ê·¹' í­ë¡œ!", theme: "theme-green", money: 900, rep: -100, msg: "ì¡°íšŒìˆ˜ í­ë°œ(+900)! ê·¸ëŸ¬ë‚˜ í—ˆìœ„ì‚¬ì‹¤ ìœ í¬ë¡œ íŒëª…ë‚˜ í‰íŒ ë°”ë‹¥(GAME OVER).", impact: "ê³µì¤‘ ë³´ê±´ ë¶ˆì‹  ì¡°ì¥ìœ¼ë¡œ ì‚¬íšŒì  í˜¼ë€ ì•¼ê¸°.", jumpTo: 2 }, { label: "ì •ë³´ íê¸°", text: "(ë¬´ì‹œí•¨)", theme: "theme-red", money: 0, rep: 0, msg: "ìœ ë³´í–ˆìŠµë‹ˆë‹¤.", impact: "ì˜í–¥ ì—†ìŒ.", jumpTo: 2 }, { label: "êµì°¨ ê²€ì¦", text: "(ì¶”ê°€ ìë£Œ ì¡°ì‚¬)", theme: "theme-blue", money: 0, rep: 0, msg: "ì¶”ê°€ ìë£Œë¥¼ ì¡°ì‚¬í•©ë‹ˆë‹¤.", impact: "ì‹ ì¤‘í•œ íƒœë„ì…ë‹ˆë‹¤.", jumpTo: 1 } ] },
            { id: "026", day: 5, type: "report", eventName: "ë°©ì†¡êµ­ ê°ì‚¬ ì˜ˆì •", title: "[ì·¨ì¬ íŒŒì¼] #026", source: "í•œêµ­ëŒ€í•™êµ ì‹í’ˆì˜ì–‘í•™ê³¼", author: "ì´ìˆ˜í•œ êµìˆ˜", date: "2025-10-11", content: "ìƒê¸°í”ŒëŸ¬ìŠ¤ëŠ” ë¹„íƒ€ë¯¼ê³¼ ë¯¸ë„¤ë„ì„ í¬í•¨í•œ íš¨ê³¼ ìˆëŠ” ì˜ì–‘ì œê°€ ë§ë‹¤.", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "[íŒ©íŠ¸ì²´í¬] ìƒê¸°í”ŒëŸ¬ìŠ¤ ì˜ì–‘ì œì— ëŒ€í•œ ì§„ì‹¤", theme: "theme-green", money: 300, rep: 20, msg: "ì˜¤ë³´ë¥¼ ë§‰ê³  ì§„ì‹¤ì„ ì•Œë ¸ìŠµë‹ˆë‹¤! ìˆ˜ìµ +300, í‰íŒ +20.", impact: "êµ­ë¯¼ë“¤ì´ í—ˆìœ„ ì •ë³´ì— íœ˜ë‘˜ë¦¬ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤." }, { label: "ê¸°ì‚¬ ë°œí–‰", text: "ë…¼ë€! 'ë‹¥í„° íŒ©íŠ¸', í—ˆìœ„ ì‚¬ì‹¤ ìœ í¬?", theme: "theme-green", money: 800, rep: -10, msg: "ìˆ˜ìµ +800. í•˜ì§€ë§Œ ëª…ì˜ˆí›¼ì† ê³ ì†Œ ë‹¹í•¨. í‰íŒ -10.", impact: "ë‹¥í„° íŒ©íŠ¸ë¥¼ ë¶ˆì‹ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ë³´ë„í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: -10, msg: "ê²°ê³¼ë¬¼ ì—†ìŒ. í‰íŒ -10.", impact: "ì˜í–¥ ì—†ìŒ." } ] },
            { id: "028", day: 5, type: "report", eventName: "ë°©ì†¡êµ­ ê°ì‚¬ ì˜ˆì •", title: "[ì·¨ì¬ íŒŒì¼] #028", source: "í•œêµ­ì¹˜ê³¼í˜‘íšŒ", author: "í™ë³´íŒ€", date: "2024-12-29", content: "ì‚°ì„± ìŒì‹ ì„­ì·¨ í›„ì—” ë°”ë¡œ ë‹¦ì§€ ë§ê³  30ë¶„ ë’¤ì— ë‹¦ìœ¼ì„¸ìš”.", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "ë‹¹ì‹ ë„ í‹€ë ¸ë‹¤! ì˜¬ë°”ë¥¸ ì¹«ì†”ì§ˆ ì‹œê°„ ê³µê°œ", theme: "theme-green", money: 200, rep: 10, msg: "ìœ ìµí•œ ìƒí™œ ì •ë³´! ìˆ˜ìµ +200, í‰íŒ +10.", impact: "êµ­ë¯¼ ì¹˜ì•„ ê±´ê°•ì´ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ê¸°ì‚¬í™”í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: -10, msg: "íƒ€ ë°©ì†¡ì‚¬ê°€ ë¨¼ì € ë³´ë„í–ˆìŠµë‹ˆë‹¤. ë’·ë¶ ì³ì„œ í‰íŒ -10.", impact: "íƒ€ ë°©ì†¡ì‚¬ ë•ë¶„ì— êµ­ë¯¼ ì¹˜ì•„ ê±´ê°•ì´ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤." } ] },
            { id: "030", day: 5, type: "report", eventName: "ë°©ì†¡êµ­ ê°ì‚¬ ì˜ˆì •", title: "[ì·¨ì¬ íŒŒì¼] #030", source: "ê¸€ë¡œë²Œ í—¬ìŠ¤ ë¦¬ì„œì¹˜ (ABCì œì•½ ì—°êµ¬ë¹„ ì§€ì›)", author: "ê°•ìš°ë¯¼", date: "2025-10-13", content: "ABCì œì•½ 'ì•„ë¥´íŒŒë¯¼' ìˆ˜ë©´ ìœ ë„ 30% ë¹ ë¦„. (ì´í•´ê´€ê³„ ëª…ì‹œë¨)", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "ë‹¨ë…! 'ë”¥ìŠ¬ë¦½' ì˜ì–‘ì œ, ë¹ ë¥¸ ìˆ˜ë©´ íš¨ê³¼ ì…ì¦", theme: "theme-green", money: 500, rep: -100, msg: "í¸íŒŒ ë³´ë„ ë¹„íŒ! í‰íŒ 0ì´ ë˜ì–´ ì¦‰ì‹œ í•´ê³ ë©ë‹ˆë‹¤.", impact: "í¸íŒŒì  ì •ë³´ í™•ì‚°.", gameOver: true }, { label: "ì •ë³´ íê¸°", text: "(íê¸°í•¨)", theme: "theme-red", money: 0, rep: 0, msg: "í¸íŒŒì ì¸ ìƒì—… ì •ë³´ë¥¼ ê±¸ëŸ¬ëƒˆìŠµë‹ˆë‹¤.", impact: "ì˜í–¥ ì—†ìŒ." } ] },
            { id: "032", day: 5, type: "report", eventName: "ë°©ì†¡êµ­ ê°ì‚¬ ì˜ˆì •", title: "[ì·¨ì¬ íŒŒì¼] #032", source: "ì‚¬ì´ì–¸ìŠ¤ ì¸ìš© (2012ë…„ ìë£Œ)", author: "ì¡´ ê¹í”Œ", date: "2012-05-08", content: "ë™ë¬¼ ì‹¤í—˜ ë‹¨ê³„ì—ì„œ ì²´ì¤‘ ê°ëŸ‰ íš¨ê³¼... (ì˜¤ë˜ë˜ê³  ìœ í•´ ê°€ëŠ¥ì„± ìˆìŒ)", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "ì…ì¦ëœ ê¸°ì ì˜ ë‹¤ì´ì–´íŠ¸ ìœ ì‚°ê· !", theme: "theme-green", money: 300, rep: -100, msg: "ë¶€ì‘ìš© ì†ì¶œ! í‰íŒ ë°”ë‹¥(0). ì¦‰ì‹œ í•´ê³ ë©ë‹ˆë‹¤.", impact: "êµ­ë¯¼ ê±´ê°• ì‹¬ê°í•œ ìœ„í˜‘.", gameOver: true }, { label: "ì •ë³´ íê¸°", text: "(íê¸°í•¨)", theme: "theme-red", money: 0, rep: 0, msg: "ì˜¤ë˜ë˜ê³  ìœ„í—˜í•œ ì •ë³´ë¥¼ ë§‰ì•˜ìŠµë‹ˆë‹¤.", impact: "ì˜í–¥ ì—†ìŒ." } ] },
            { id: "035", day: 5, type: "report", eventName: "ë°©ì†¡êµ­ ê°ì‚¬ ì˜ˆì •", title: "[ì·¨ì¬ íŒŒì¼] #035", source: "KMS ë°©ì†¡êµ­ DB", author: "ì œì‘íŒ€", date: "2025-10-16", content: "ì˜¤ëŠ˜ë°¤ 'ì°¸ëœ ì˜ì‚¬' ê³ í˜ˆì•• í¸ ë°©ì†¡ ì˜ˆê³ . ëª…ì˜ ìµœëª…ì œ êµìˆ˜ ì¶œì—°.", choices: [ { label: "ê¸°ì‚¬ ë°œí–‰", text: "ìˆœí™˜ê¸°ë‚´ê³¼ ìµœê³  ëª…ì˜ê°€ ë°íˆëŠ” ê³ í˜ˆì••ì˜ ëª¨ë“  ê²ƒ", theme: "theme-green", money: 1000, rep: 20, msg: "í™ë³´ì™€ ê³µìµ ë™ì‹œ ë‹¬ì„±! ìˆ˜ìµ +1000, í‰íŒ +20.", impact: "ê³ í˜ˆì•• ë°œë³‘ë¥  ê°ì†Œì— ê¸°ì—¬í–ˆìŠµë‹ˆë‹¤." }, { label: "ì •ë³´ íê¸°", text: "(ê¸°ì‚¬í™”í•˜ì§€ ì•ŠìŒ)", theme: "theme-red", money: 0, rep: -10, msg: "ìì‚¬ í”„ë¡œê·¸ë¨ í™ë³´ë„ ì•ˆ í•˜ëƒë©° ì§ˆì±… ë°›ìŒ. í‰íŒ -10.", impact: "ì •ë³´ ì „ë‹¬ ì‹¤íŒ¨." } ] }
        ];

        let currentState = { idx: 0, money: 0, rep: 100, dialogueStep: 0, subPageIndex: 0, lastRenderedDay: 0 };
        
        function resetGame() {
            currentState = { idx: 0, money: 0, rep: 100, dialogueStep: 0, subPageIndex: 0, lastRenderedDay: 0 };
            document.getElementById('landing-screen').style.display = 'none'; 
            document.getElementById('story-screen').style.display = 'none';
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('top-bar').style.display = 'flex';
            document.getElementById('desk-area').style.display = 'flex';
            document.getElementById('modal-overlay').style.display = 'none';
            document.getElementById('dialogue-overlay').style.display = 'none';
            document.getElementById('day-transition-screen').style.display = 'none';
            document.getElementById('turn-notification').style.display = 'none';
            
            scenarios.forEach(s => { if(s.dialogueScript) s.dialoguePlayed = false; });
            
            // ìš©ì§€ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
            const paper = document.getElementById('paper');
            paper.className = ''; paper.style.transform = 'rotate(-1deg)'; paper.style.border = "3px solid #000";
            document.getElementById('paper-title').className = '';
            document.getElementById('paper-content-box').className = '';
            document.getElementById('metadata-area').style.display = 'block';
            document.getElementById('content-label-row').style.display = 'flex';
            
            renderScenario();
        }

        function renderScenario() {
            if (currentState.idx >= scenarios.length) { showEnding("success"); return; }
            const s = scenarios[currentState.idx];

            if (s.day > currentState.lastRenderedDay) {
                showDayTransition(s.day, s.eventName, () => {
                    currentState.lastRenderedDay = s.day; 
                    renderScenario(); 
                });
                return; 
            }

            // === [NEW] ìŠ¤ë§ˆíŠ¸í° ë©”ì‹œì§€ ì²´í¬ ë¡œì§ ===
            if (s.phoneMsg && !s.phoneMsgSent) {
                setTimeout(() => {
                    sendPhoneMessage(s.phoneMsg.sender, s.phoneMsg.text);
                }, 1500); // 1.5ì´ˆ í›„ ë„ì°©
                s.phoneMsgSent = true; // ì¤‘ë³µ ë°œì†¡ ë°©ì§€
            }

            document.getElementById('day-display').innerText = `DAY 0${s.day}`;
            document.getElementById('money-display').innerText = currentState.money.toLocaleString();
            document.getElementById('rep-display').innerText = currentState.rep;
            document.getElementById('event-display').innerText = s.eventName;

            const paper = document.getElementById('paper');
            // ë§Œì•½ ì—”ë”© í™”ë©´ ìƒíƒœì˜€ë‹¤ë©´ ì´ˆê¸°í™”
            if (paper.classList.contains('ending-paper')) {
                 paper.className = ''; paper.style.transform = 'rotate(-1deg)'; paper.style.border = "3px solid #000";
            }
            document.getElementById('metadata-area').style.display = 'block';
            document.getElementById('content-label-row').style.display = 'flex';

            let currentContent = s;
            if (s.isMultiPage && s.pages) currentContent = s.pages[currentState.subPageIndex];

            document.getElementById('paper-title').innerText = currentContent.title;
            document.getElementById('paper-title').className = '';
            document.getElementById('paper-source').innerText = currentContent.source;
            document.getElementById('paper-author').innerText = currentContent.author;
            document.getElementById('paper-date').innerText = currentContent.date;
            document.getElementById('paper-content-box').innerText = currentContent.content;

            const btnContainer = document.getElementById('button-area');
            btnContainer.innerHTML = ""; 

            if (s.dialogueScript && !s.dialoguePlayed) { startDialogue(s); return; }

            if (s.isMultiPage && currentState.subPageIndex < s.pages.length - 1) {
                const btn = document.createElement('div');
                btn.className = `action-btn theme-blue`;
                btn.onclick = () => nextSubPage();
                btn.innerHTML = `<div class="btn-label">â–¶</div><div class="btn-text">ë‹¤ìŒ ì •ë³´ í™•ì¸ (ìƒˆë¡œìš´ ì œë³´ ë„ì°©!)</div>`;
                btnContainer.appendChild(btn);
            } else {
                s.choices.forEach(choice => {
                    const btn = document.createElement('div');
                    btn.className = `action-btn ${choice.theme}`;
                    btn.onclick = () => handleChoice(choice);
                    btn.innerHTML = `<div class="btn-label">${choice.label}</div><div class="btn-text">${choice.text}</div>`;
                    btnContainer.appendChild(btn);
                });
            }
        }

        // === [NEW] ë‹¤ìŒ ì„œë¸Œí˜ì´ì§€ ì „í™˜ (ì• ë‹ˆë©”ì´ì…˜ & ì•Œë¦¼ ì¶”ê°€) ===
        function nextSubPage() {
            const currentScenario = scenarios[currentState.idx];
            const nextPageIdx = currentState.subPageIndex + 1;
            const nextPageData = currentScenario.pages[nextPageIdx];
            
            const paper = document.getElementById('paper');

            // 1. ë§Œì•½ ë‹¤ìŒ í˜ì´ì§€ì— ì•Œë¦¼(transitionAlert)ì´ ìˆë‹¤ë©´
            if (nextPageData.transitionAlert) {
                // (1) í˜„ì¬ ì¢…ì´ ìŠ¬ë¼ì´ë“œ ì•„ì›ƒ
                paper.classList.add('paper-slide-out');

                // (2) ì•Œë¦¼ì°½ í‘œì‹œ
                const noti = document.getElementById('turn-notification');
                noti.innerText = nextPageData.transitionAlert;
                noti.style.display = 'block';

                // (3) ì ì‹œ ëŒ€ê¸° í›„ ì¢…ì´ ë‚´ìš© êµì²´ ë° ìŠ¬ë¼ì´ë“œ ì¸
                setTimeout(() => {
                    currentState.subPageIndex++; // ì¸ë±ìŠ¤ ì¦ê°€
                    paper.classList.remove('paper-slide-out');
                    
                    // ë‚´ìš© ë Œë”ë§ (ì´ ì‹œì ì—” ì•„ì§ ì•ˆ ë³´ì„, opacity 0)
                    renderScenario();
                    
                    // (4) ìŠ¬ë¼ì´ë“œ ì¸ ì• ë‹ˆë©”ì´ì…˜
                    paper.classList.add('paper-slide-in');
                    
                    // (5) ì•Œë¦¼ ìˆ¨ê¸°ê¸°
                    setTimeout(() => {
                        noti.style.display = 'none';
                        paper.classList.remove('paper-slide-in'); // ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ ì •ë¦¬
                    }, 1500);

                }, 800); // ìŠ¬ë¼ì´ë“œ ì•„ì›ƒ ì‹œê°„ê³¼ ë§ì¶¤
            } else {
                // ì¼ë°˜ì ì¸ í˜ì´ì§€ ë„˜ê¹€
                currentState.subPageIndex++;
                renderScenario();
            }
        }

        function startDialogue(scenario) {
            currentState.dialogueStep = 0;
            document.getElementById('dialogue-overlay').style.display = 'flex';
            showDialogueStep(scenario);
        }

        function showDialogueStep(scenario) {
            const script = scenario.dialogueScript;
            const currentLine = script[currentState.dialogueStep];
            const npcArea = document.getElementById('npc-area');
            const playerArea = document.getElementById('player-area');

            if (currentLine.speaker === "ë‹¹ì‹ ") {
                npcArea.style.display = 'none'; playerArea.style.display = 'flex'; playerArea.innerHTML = ''; 
                const btn = document.createElement('div');
                btn.className = 'player-choice-btn';
                btn.innerHTML = `<span class="player-choice-label">â–¶ ì„ íƒ</span> ${currentLine.text}`;
                btn.onclick = function() { nextDialogue(scenario); };
                playerArea.appendChild(btn);
            } else {
                playerArea.style.display = 'none'; npcArea.style.display = 'flex';
                const nameTag = document.getElementById('npc-name');
                nameTag.innerText = currentLine.speaker === "narrator" ? "ì•Œë¦¼" : currentLine.speaker;
                nameTag.style.backgroundColor = currentLine.speaker === "narrator" ? "#7f8c8d" : "#e74c3c";
                
                // [NEW] innerText -> innerHTML ë¡œ ë³€ê²½í•˜ì—¬ <br> ì ìš©
                document.getElementById('npc-text').innerHTML = currentLine.text;
                
                npcArea.onclick = function() { nextDialogue(scenario); };
            }
        }

        function nextDialogue(scenario) {
            if (!scenario) scenario = scenarios[currentState.idx];
            currentState.dialogueStep++;
            if (currentState.dialogueStep >= scenario.dialogueScript.length) {
                document.getElementById('dialogue-overlay').style.display = 'none';
                scenario.dialoguePlayed = true; renderScenario(); 
            } else { showDialogueStep(scenario); }
        }

        function handleChoice(choice) {
            currentState.money += choice.money; currentState.rep += choice.rep;
            if (currentState.rep > 100) currentState.rep = 100;

            const modal = document.getElementById('modal-overlay');
            const nextBtn = document.querySelector('.next-btn');
            
            if (currentState.rep <= 0 || choice.gameOver) {
                modal.style.display = "none"; showEnding("fail");
            } else {
                document.getElementById('modal-title').innerText = "ê²°ê³¼ ë³´ê³ ";
                document.getElementById('modal-title').style.color = "black";
                document.getElementById('modal-msg').innerText = choice.msg;
                document.getElementById('modal-impact').innerText = "ì‚¬íšŒì  ì˜í–¥: " + choice.impact;
                nextBtn.innerText = "ë‹¤ìŒ ì—…ë¬´ â–¶";
                nextBtn.onclick = nextStep;
                
                if (choice.jumpTo) currentState.nextIdx = currentState.idx + choice.jumpTo;
                else currentState.nextIdx = currentState.idx + 1;
                modal.style.display = "flex";
            }
        }

        function nextStep() {
            document.getElementById('modal-overlay').style.display = "none";
            currentState.idx = currentState.nextIdx; currentState.subPageIndex = 0; 
            renderScenario();
        }

        // === ë¬¸ì„œ ê¸°ë°˜ ì—”ë”© ì‹œìŠ¤í…œ ===
        function showEnding(type) {
            document.getElementById('modal-overlay').style.display = 'none';
            const paper = document.getElementById('paper');
            const title = document.getElementById('paper-title');
            const contentBox = document.getElementById('paper-content-box');
            const btnArea = document.getElementById('button-area');
            const metadata = document.getElementById('metadata-area');
            const labelRow = document.getElementById('content-label-row');

            metadata.style.display = 'none';
            labelRow.style.display = 'none';
            btnArea.innerHTML = "";
            paper.className = 'ending-paper';

            if (type === "fail") {
                paper.classList.add('fail-theme');
                title.innerText = "í•´ê³  í†µì§€ì„œ";
                contentBox.className = 'ending-content';
                contentBox.innerHTML = `
<div style="text-align:center; font-size:3rem; margin-bottom:10px;">ğŸ“‰</div>
ìˆ˜ì‹ : ì˜¨ë¼ì¸ ë‰´ìŠ¤ë¶€ ìˆ˜ìŠµê¸°ì ê·€í•˜<br><br>
ê·€í•˜ëŠ” ìˆ˜ìŠµ ê¸°ê°„ ì¤‘ ì‹¬ê°í•œ í‰íŒ í•˜ë½ ë° í—ˆìœ„ ì‚¬ì‹¤ ìœ í¬ë¡œ ì¸í•´ ë°©ì†¡êµ­ì˜ ì‹ ë¢°ë„ë¥¼ ì‹¬ê°í•˜ê²Œ í›¼ì†í•˜ì˜€ìŠµë‹ˆë‹¤.<br>
ì´ì— ë°©ì†¡ì–¸ë¡ ë¯¸ë””ì–´ì‹¬ì˜ìœ„ì›íšŒë¡œë¶€í„° ì¤‘ì§•ê³„ë¥¼ ë°›ì•˜ìœ¼ë©°, ë‹¹ì‚¬ ì¸ì‚¬ìœ„ì›íšŒëŠ” ê·€í•˜ì™€ì˜ ê³ ìš© ê³„ì•½ì„ ì§€ì†í•  ìˆ˜ ì—†ë‹¤ê³  íŒë‹¨í•˜ì˜€ìŠµë‹ˆë‹¤.<br><br>
<strong>ì§•ê³„ ì‚¬ìœ :</strong><br>
1. ê²€ì¦ë˜ì§€ ì•Šì€ ì •ë³´ ë¬´ë¶„ë³„í•œ ê¸°ì‚¬í™”<br>
2. ì´í•´ê´€ê³„ê°€ ì–½íŒ í¸íŒŒì  ë³´ë„ë¡œ ì¸í•œ ê³µì •ì„± í›¼ì†<br>
3. ê²°ê³¼ì ìœ¼ë¡œ êµ­ë¯¼ì˜ ì•Œ ê¶Œë¦¬ ì¹¨í•´ ë° ê³µìµ ì €í•´<br><br>
**ìµœì¢… ê¸°ë¡:**<br>
- ìµœì¢… í‰íŒ: ${currentState.rep} / 100<br>
- ìµœì¢… ìˆ˜ìµ: ${currentState.money.toLocaleString()} ë§Œì›<br><br>
ìœ„ì™€ ê°™ì€ ì‚¬ìœ ë¡œ ê·€í•˜ë¥¼ í•´ê³ í•©ë‹ˆë‹¤.
<div class="stamp" style="color:#d63031;">KMS ë°©ì†¡êµ­ ì¸ì‚¬ìœ„ì›íšŒ</div>
<button class="restart-btn" style="background-color:#d63031;" onclick="resetGame()">ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
                `;
            } else {
                paper.classList.add('success-theme');
                title.innerText = "ì •ê·œì§ ì„ëª…ì¥";
                contentBox.className = 'ending-content';
                contentBox.innerHTML = `
<div style="text-align:center; font-size:3rem; margin-bottom:10px;">ğŸ‰</div>
ìˆ˜ì‹ : ì˜¨ë¼ì¸ ë‰´ìŠ¤ë¶€ ìˆ˜ìŠµê¸°ì ì´ìˆ˜í˜¸<br><br>
ê·€í•˜ëŠ” 5ì¼ê°„ì˜ ìˆ˜ìŠµ ê¸°ê°„ ë™ì•ˆ íƒì›”í•œ ì—…ë¬´ ëŠ¥ë ¥ê³¼ ì¤€ìˆ˜í•œ í‰íŒ ê´€ë¦¬ë¥¼ ë³´ì—¬ì£¼ì—ˆìŠµë‹ˆë‹¤.
ì´ì— ë‹¹ì‚¬ ì¸ì‚¬ìœ„ì›íšŒëŠ” ê·€í•˜ë¥¼ **ì •ê·œì§ ê¸°ì**ë¡œ ì±„ìš©í•˜ê¸°ë¡œ ê²°ì •í•˜ì˜€ìŠµë‹ˆë‹¤.<br><br>
**ìµœì¢… í‰ê°€:**<br>
- ğŸ’° ëˆ„ì  ìˆ˜ìµ: ${currentState.money.toLocaleString()} ë§Œì›<br>
- â™¥ ìµœì¢… í‰íŒ: ${currentState.rep} / 100<br><br>
ì•ìœ¼ë¡œë„ KMS ë°©ì†¡êµ­ì˜ í•µì‹¬ ì¸ì¬ë¡œì„œ 'ì§„ì‹¤'ê³¼ 'ìˆ˜ìµ' ì‚¬ì´ì—ì„œ í˜„ëª…í•œ ì¤„íƒ€ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤. í™˜ì˜í•©ë‹ˆë‹¤!
<div class="stamp success-stamp">KMS ë°©ì†¡êµ­ ì‚¬ì¥</div>
<button class="restart-btn" style="background-color:#27ae60;" onclick="resetGame()">ìƒˆë¡œìš´ ë§ˆìŒìœ¼ë¡œ ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
                `;
            }
        }
    </script>
</body>
</html>
